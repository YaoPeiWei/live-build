# 报告错误

## 14.1 报告错误

实时系统远非完美，但我们希望在您的帮助下尽可能接近完美。不要犹豫报告错误。填写报告两次总比从不填写要好。然而，本章包括有关如何提交良好错误报告的建议。

* 首先检查错误是否已被报告。您可以在<https://bugs.debian.org/cgi-bin/pkgreport.cgi?maint=debian-live%40lists.debian.org>查看分配给live-team的完整错误列表。

* 在提交错误报告之前，请始终尝试使用您正在使用的_live-build_、_live-boot_、_live-config_和_live-tools_软件包的**最新版本**重现该错误。

* 尽量提供**尽可能具体的信息**关于错误。这至少包括您使用的_live-build_、_live-boot_、_live-config_和_live-tools_的版本以及您正在构建的实时系统的发行版。

## 14.2 已知问题

当前已知的问题列在BTS中，网址为<https://bugs.debian.org/cgi-bin/pkgreport.cgi?maint=debian-live%40lists.debian.org>。

注意：由于Debian **testing**和Debian **unstable**发行版是移动目标，当您将其中之一指定为目标系统发行版时，成功构建可能并不总是可能的。

如果这给您带来了太多困难，请不要基于**testing**或**unstable**构建系统，而是使用**stable**。_live-build_始终默认为**stable**版本。

本手册不在范围内训练您正确识别和修复开发发行版中的软件包问题，但是，您始终可以尝试以下操作：如果在目标发行版为**testing**时构建失败，请尝试**unstable**。如果**unstable**确实有效，请恢复到**testing**并从**unstable**中固定失败软件包的新版本（有关详细信息，请参阅APT固定）。

## 14.3 进行研究

在提交错误之前，请在网上搜索您遇到的特定错误消息或症状。因为您不太可能是唯一遇到特定问题的人。总有可能它已在其他地方讨论过，并提出了可能的解决方案、补丁或变通办法。

您应该特别注意实时系统邮件列表以及主页，因为这些可能包含最新信息。如果存在此类信息，请始终在错误报告中包含对其的引用。

此外，您还应该检查_live-build_、_live-boot_、_live-config_和_live-tools_的当前错误列表，以查看是否已报告类似问题。

## 14.4 从头开始重建

为了确保特定错误不是由不干净的构建系统引起的，请始终从头开始重建整个实时系统，以查看错误是否可重现。

## 14.5 使用最新的软件包

使用过时的软件包在尝试重现（并最终修复）您的问题时可能会导致重大问题。确保您的构建系统是最新的，并且您映像中包含的任何软件包也是最新的。如果可能，请尝试使用最新的源代码重现该错误，详情请参阅安装。

## 14.6 收集信息

请在报告中提供足够的信息。至少包括遇到错误的_live-build_的确切版本和重现步骤。请使用您的常识，并在您认为可能有助于解决问题的情况下提供任何其他相关信息。

为了充分利用您的错误报告，我们至少需要以下信息：

* 主机系统的架构

* 主机系统的发行版

* 主机系统上的_live-build_版本

* 主机系统上的_debootstrap_版本

* 实时系统的架构

* 实时系统的发行版

* 实时系统上的_live-boot_版本

* 实时系统上的_live-config_版本

* 实时系统上的_live-tools_版本

您可以使用tee命令生成构建过程的日志。我们建议通过自动/构建脚本自动执行此操作（有关详细信息，请参阅管理配置）。

```
# lb build 2>&1 | tee build.log  
```

在启动时，_live-boot_和_live-config_将其日志文件存储在/var/log/live/中。检查它们是否有错误消息。

此外，为了排除其他错误，始终建议将您的config/目录打包并上传到某个地方（请**不要**将其作为附件发送到邮件列表），以便我们可以尝试重现您遇到的错误。如果这很困难（例如由于大小），您可以使用lb config --dump的输出，该输出会生成您的配置树的摘要（即列出config/的子目录中的文件，但不包括它们）。

请记住，发送的任何日志都应使用英语区域设置生成，例如，使用前导LC_ALL=C或LC_ALL=en_US运行您的_live-build_命令。

## 14.7 尽可能隔离失败的情况

如果可能，将失败的情况隔离到最小的可能更改。这并不总是容易做到的，所以如果您无法为您的报告做到这一点，请不要担心。然而，如果您计划好开发周期，使用足够小的更改集进行每次迭代，您可能能够通过构建一个更简单的"基础"配置来隔离问题，该配置与您的实际配置非常匹配，只需添加损坏的更改集即可。如果您很难理清哪些更改导致了问题，可能是因为您在每个更改集中包含了太多内容，应该以更小的增量进行开发。

## 14.8 使用正确的软件包报告错误

通常，您应该针对_live-build_软件包报告构建时错误，针对_live-boot_报告启动时错误，针对_live-config_报告运行时错误。如果您不确定哪个软件包合适或在提交错误报告之前需要更多帮助，请针对debian-live伪软件包报告。然后我们将负责并在适当时重新分配。

然而，我们将不胜感激，如果您尝试根据错误出现的位置缩小范围。

### 14.8.1 在引导时引导

_live-build_首先使用_debootstrap_引导一个基本的Debian系统。如果此处出现错误，请检查错误是否与特定的Debian软件包（最有可能）相关，或者是否与引导工具本身相关。

在这两种情况下，这不是实时系统中的错误，而是Debian本身的问题，我们可能无法直接修复它。请针对引导工具或失败的软件包报告此类错误。

### 14.8.2 在安装软件包时引导

_live-build_从Debian存档中安装其他软件包，并根据使用的Debian发行版和每日存档状态，可能会失败。如果此处出现错误，请检查错误是否也可以在正常系统上重现。

如果是这种情况，这不是实时系统中的错误，而是Debian中的错误 - 请针对失败的软件包报告。单独从实时系统构建中运行_debootstrap_或运行lb bootstrap --debug将为您提供更多信息。

此外，如果您使用本地镜像和/或任何类型的代理并遇到问题，请始终首先通过从官方镜像引导来重现它。

### 14.8.3 在启动时

如果您的映像无法启动，请将其报告给邮件列表，并附上收集信息中请求的信息。不要忘记提及映像何时/如何失败，是否使用虚拟化或真实硬件。如果您使用任何类型的虚拟化技术，请始终在真实硬件上运行它，然后再报告错误。提供故障的屏幕截图也非常有帮助。

### 14.8.4 在运行时

如果软件包已成功安装，但在实际运行实时系统时失败，这可能是_live-config_中的错误。

## 14.9 在哪里报告错误

Debian Live项目在错误跟踪系统（BTS）中跟踪所有错误。有关如何使用该系统的信息，请参阅<https://bugs.debian.org/>。您还可以使用同名软件包中的reportbug命令提交错误。

请注意，在从Debian派生的发行版（如Ubuntu和其他）中发现的错误**不应**报告给Debian BTS，除非它们也可以在使用官方Debian软件包的Debian系统上重现。 